## **4. ДИНАМИЧЕСКОЕ ПРОГРАММИРОВАНИЕ**

### **I. ОСНОВНЫЕ ПРИНЦИПЫ И ФИЛОСОФИЯ ДП**
*   **Основные принципы:**
    *   **Оптимальная подструктура** (Optimal Substructure)
    *   **Перекрывающиеся подзадачи** (Overlapping Subproblems)
    *   **Принцип оптимальности Беллмана**
*   **Теория сложности для ДП:**
    *   Классы сложности: P, NP, #P
    *   PSPACE-complete задачи
    *   Доказательства оптимальности
*   **Математические основы:**
    *   Принцип индукции в ДП
    *   Теория рекуррентных соотношений
    *   **Рекуррентные соотношения** - математическая основа
    *   Динамическое программирование как функциональное уравнение
*   **Подходы к реализации:**
    *   **Мемоизация (Top-Down)** - рекурсия с запоминанием
    *   **Табуляция (Bottom-Up)** - заполнение таблицы
*   **Примеры-разминка:**
    *   Factorial
    *   Fast Fibonacci
    *   Catalan Numbers (основные формулы и вычисления)

### **II. ОДНОМЕРНАЯ ДИНАМИКА**
*   **Классические задачи:**
    *   Climbing Stairs
    *   Fibonacci, Tribonacci
    *   **Оптимизационные задачи:**
        *   Max Non Adjacent Sum
        *   Max Subarray Sum (Алгоритм Кадане)
        *   Minimum Steps To One
        *   Minimum Coin Change
        *   Minimum Tickets Cost
    *   **Комбинаторная динамика:**
        *   Combination Sum IV
        *   Catalan Numbers (различные интерпретации)
        *   Подсчет путей в сетке
        *   Размен монет (количество способов)

### **III. ДВУМЕРНАЯ И МНОГОМЕРНАЯ ДИНАМИКА**
*   **Динамика на матрицах и путях:**
    *   Minimum Cost Path
    *   Trapped Water (2D)
    *   Unique Paths (с препятствиями и без)
    *   Maximum Path Sum в треугольнике/матрице
*   **Сравнительная динамика (Sequence Alignment):**
    *   Edit Distance (Левенштейн)
    *   Longest Common Subsequence (LCS)
    *   Longest Common Substring
    *   Wildcard Matching
    *   Regex Match
    *   Abbreviation
    *   Smith Waterman (локальное выравнивание)
    *   Needleman-Wunsch (глобальное выравнивание)
*   **Рюкзачные задачи (Knapsack DP):**
    *   0-1 Knapsack
    *   Неограниченный рюкзак
    *   Рюкзак с повторениями
    *   Minimum Partition (разбиение на две части)
    *   Sum Of Subset (сумма подмножества)
    *   Target Sum (± операции)
    *   Largest Divisible Subset
    *   Coin Change (минимум монет/количество способов)

### **IV. ДИНАМИКА ПО ОТРЕЗКАМ И ПОДСТРОКАМ**
*   **Оптимизация разбиений:**
    *   Matrix Chain Multiplication
    *   Matrix Chain Order
    *   Palindrome Partitioning
    *   Optimal Binary Search Tree
    *   Rod Cutting
*   **Динамика на подстроках:**
    *   Longest Palindromic Subsequence (LPS)
    *   Longest Palindromic Substring
    *   Longest Increasing Subsequence:
        *   N² алгоритм (классический)
        *   NlogN алгоритм (патентс/бинарный поиск)
        *   LIS с восстановлением ответа
    *   Max Product Subarray
    *   **Подпоследовательности:**
        *   Longest Bitonic Subsequence
        *   Maximum Sum Increasing Subsequence
        *   Count Distinct Subsequences

### **V. ДИНАМИКА ПО ПОДМНОЖЕСТВАМ (БИТОВЫЕ МАСКИ)**
*   **Основные техники:**
    *   Bitmask (общие техники)
    *   Iterating Through Submasks (перебор подмасок)
    *   Subset Generation (генерация подмножеств)
    *   All Construct (все способы построения)
*   **Классические задачи:**
    *   Задача коммивояжера (TSP):
        *   Классический TSP
        *   TSP с возвратом в старт
        *   TSP с метрикой/без метрики
        *   Bitonic TSP
    *   Assignment Problem (назначение работников)
    *   Hamiltonian Path/Cycle
    *   Maximum Clique/Independent Set
    *   Set Cover/Partition
*   **Оптимизации:**
    *   DP over subsets with meet-in-the-middle
    *   SOS DP (Sum over Subsets)

### **VI. ДИНАМИКА ПО ПРОФИЛЮ**
*   **Основные понятия:**
    *   Профиль - состояние границы
    *   Переходы между профилями
*   **Задачи на замощение:**
    *   **Доминошками (Паркет):**
        *   Замощение поля 2×N доминошками
        *   Замощение поля M×N доминошками
        *   Замощение с дефектами (дырками)
    *   **Тримино (L-образные фигуры):**
        *   Замощение без дефектов
        *   Замощение с одной дыркой
    *   **Полимино (тетримино и др.):**
        *   Замощение фигурами тетриса
    *   **Обобщенное замощение:**
        *   Различными фигурами
        *   С учетом симметрий
*   **Другие задачи:**
    *   Minimum Squares To Represent A Number
    *   Подсчет числа способов покрытия
    *   Задачи на мосты и соединения

### **VII. ДИНАМИКА НА ДЕРЕВЬЯХ**
*   **Классификация задач:**
    *   Динамика на корневом дереве
    *   Динамика на произвольном дереве (переподвешивание)
*   **Типовые состояния:**
    *   DP[v][0/1] - вершина v включена/не включена
    *   DP на независимое множество, вершинное покрытие
    *   DP на доминирующее множество
*   **Примеры задач:**
    *   Binary Tree Path Sum
    *   Maximum Sum BST
    *   Maximum Independent Set на дереве
    *   Minimum Vertex Cover на дереве
    *   Maximum Matching на дереве
    *   Tree Diameter через DP
    *   Подсчет поддеревьев с определенными свойствами
*   **Специальные техники:**
    *   Rerooting DP (переподвешивание корня)
    *   DP на centroid decomposition
    *   Tree DP с ограничениями на размер компонент

### **VIII. ДИНАМИКА НА ГРАФАХ (DAG И НЕ ТОЛЬКО)**
*   **На Directed Acyclic Graph (DAG):**
    *   Нахождение количества путей в DAG
    *   Нахождение самого длинного/короткого пути
    *   Word Break (разбиение строки по словарю)
    *   Word Ladder (преобразование слов)
*   **Алгоритмы на графах как DP:**
    *   Floyd Warshall (DP по промежуточным вершинам)
    *   Bellman-Ford (релаксация рёбер)
    *   Min Distance Up Bottom
*   **Специальные задачи:**
    *   Maximum Clique в интервальном графе
    *   Maximum Independent Set в двудольном графе
    *   Динамика на пути/цикле

### **IX. СПЕЦИАЛЬНЫЕ ВИДЫ И ТЕХНИКИ ДП**

#### **A. Цифровая динамика (Digit DP)**
*   **Основная идея:** подсчет чисел с ограничениями по цифрам
*   **Задачи:**
    *   Подсчет чисел в диапазоне [L, R] с определенными свойствами
    *   Range Sum Query для цифровых свойств
    *   Сумма цифр всех чисел в диапазоне
    *   Числа без повторяющихся цифр
    *   Числа, делящиеся на K
*   **Техники:**
    *   Состояние: (позиция, tight, leadingZero, ...)
    *   Мемоизация со сложными состояниями

#### **B. Вероятностная динамика (Probability DP)**
*   **Основы теории вероятностей в ДП:**
    *   Ожидаемое значение (expected value)
    *   Вероятности переходов между состояниями
*   **Задачи:**
    *   Игровые задачи с вероятностями (кости, карты)
    *   Random Walks (случайные блуждания)
    *   Markov Chains (цепи Маркова)
    *   Viterbi Algorithm (скрытые марковские модели)
    *   Expected number of steps до поглощающего состояния

#### **C. Комбинаторная игровая динамика (Combinatorial Game DP)**
*   **Игры с impartial rules:**
    *   Вычисление Grundy numbers (нимберов):
        *   mex (minimum excludant) функция
        *   Рекуррентное вычисление позиций
    *   Определение P-позиций (проигрышных) и N-позиций (выигрышных)
    *   **Классические игры:**
        *   Nim (разные варианты)
        *   Kayles (кегли)
        *   Dawson's Kayles
        *   Wythoff's game
*   **Теорема Шпрага-Гранди:**
    *   Разложение игры на независимые компоненты
    *   XOR операция над нимберами
    *   Вычисление результата составной игры
*   **Partisan games (игры с разными правилами):**
    *   Hot games, cold games
    *   Сравнение игровых значений
*   **Применения:**
    *   Анализ конечных игр
    *   Оптимальная стратегия в комбинаторных играх
    *   Вычисление выигрышных позиций

#### **D. Параметрическая динамика**
*   **Динамика с дополнительными параметрами:**
    *   DP с ограничением на количество элементов
    *   DP с ограничением на сумму/разность
    *   Integer Partition
    *   Minimum Size Subarray Sum
*   **Техника "DP с K измерениями"**

#### **E. Временная динамика**
*   **Динамика во времени:**
    *   Scheduling problems
    *   Time-dependent стоимости
    *   Задачи с временными окнами

#### **F. Ленивая динамика (Lazy DP)**
*   Отложенные вычисления
*   Динамика с кэшированием и мемоизацией по требованию

### **X. СЛОЖНЫЕ ОПТИМИЗАЦИИ ДП**

#### **A. Оптимизация пространства (Memory Optimization)**
*   **Rolling DP:** хранение только необходимых слоёв
*   **Bit DP:** сжатие состояний в биты
*   **DP на префиксах:** O(N) памяти вместо O(N²)

#### **B. Оптимизация времени пересчёта**

##### **B1. Монотонные оптимизации:**
*   **Divide & Conquer Optimization:**
    *   Применимость: dp[i][j] = min(dp[i-1][k] + C[k][j])
    *   Условие: Quadrangle Inequality
    *   Сложность: O(KNlogN) → O(KN)
*   **Knuth Optimization:**
    *   Применимость: dp[i][j] = min(dp[i][k] + dp[k+1][j] + C[i][j])
    *   Условие: Quadrangle Inequality + Monotonicity
    *   Использование: Matrix Chain Multiplication
*   **Monge Array Optimization**

##### **B2. Convex Hull Trick (CHT):**
*   **Линейные функции:** f(x) = a*x + b
*   **Типы:**
    *   **Static CHT:** добавление линий в порядке возрастания угла
    *   **Dynamic CHT:** произвольное добавление линий
*   **Реализации:**
    *   На стеке/декке
    *   Li Chao Tree (динамический CHT)
    *   С дробными коэффициентами
*   **Задачи:** Max/Min of linear functions at given x

##### **B3. Aliens Trick (Лагранжева релаксация):**
*   **Идея:** сведение задачи с дополнительным ограничением
*   **Применение:** задачи "взять не более K элементов"
*   **Бинарный поиск** по параметру Лагранжа
*   **Задачи:** K-сегментное разбиение, K-route задачи

##### **B4. Оптимизация через очередь минимумов:**
*   Sliding Window минимум/максимум
*   Deque-based оптимизация
*   Применение: Max Subarray Sum с ограничением длины

##### **B5. SMAWK Algorithm:**
*   Алгоритм Агарвала-Клаоса-Мортина-Принса-Шора
*   Для полностью монотонных матриц
*   O(N) для нахождения минимумов в строках

#### **C. Параллельные и распределённые реализации ДП**
*   **GPU оптимизации:** CUDA/OpenCL реализации
*   **Распределённое ДП:** MapReduce подход
*   **Потоковые алгоритмы:** one-pass DP
